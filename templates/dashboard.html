{% extends "base.html" %}
{% block content %}
<div class="admin-container">
    <h1>Админ-панель</h1>

    <div class="admin-section">
        <h2>Добавить пользователя</h2>
        <form method="POST" class="admin-form">
            {{ form_user.hidden_tag() }}
            <div class="form-row">
                {{ form_user.full_name(class="form-input") }}
                {{ form_user.login(class="form-input") }}
                {{ form_user.password(class="form-input") }}
            </div>
            {{ form_user.submit(class="btn btn-primary") }}
        </form>
    </div>

    <div class="admin-section">
        <h2>Добавить отпуск</h2>
        <form method="POST" class="admin-form">
            {{ form_vacation.hidden_tag() }}
            <div class="form-row">
                {{ form_vacation.user_id(class="form-input") }}
                {{ form_vacation.year(class="form-input") }}
                {{ form_vacation.week_num(class="form-input") }}
            </div>
            {{ form_vacation.submit(class="btn btn-success") }}
        </form>
    </div>

    <div class="admin-section">
        <h2>Пользователи ({{ users|length }})</h2>
        <table class="admin-table">
            <tr><th>ID</th><th>ФИО</th><th>Логин</th><th>Админ</th></tr>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.full_name }}</td>
                <td>{{ user.login }}</td>
                <td>{{ '✅' if user.is_admin else '' }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <div class="admin-section">
        <h2>Отпуска ({{ vacations|length }})</h2>
        <table class="admin-table">
            <tr><th>ID</th><th>Пользователь</th><th>Год</th><th>Неделя</th></tr>
            {% for vac in vacations %}
            <tr>
                <td>{{ vac.id }}</td>
                <td>{{ vac.full_name }}</td>
                <td>{{ vac.year }}</td>
                <td>{{ vac.week_num }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}
